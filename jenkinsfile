pipeline {
    agent any
    
    parameters {
        string(name: 'NEW_FOLDER_NAME', description: 'Nombre de la nueva carpeta en GitHub', defaultValue: '')
    }

    stages {
        stage('Create GitHub Folder') {
            steps {
                script {
                    def createFolderResponse = sh(script: """
                        git config --global user.email "jenkins@example.com"
                        git config --global user.name "Jenkins"
                        git clone https://github.com/titanrex/terraform.git
                        cd terraform
                        mkdir ${params.NEW_FOLDER_NAME}
                        git add ${params.NEW_FOLDER_NAME}
                        git commit -m "Create ${params.NEW_FOLDER_NAME}"
                        git push origin main
                    """, returnStdout: true).trim()

                    echo "Folder created: ${params.NEW_FOLDER_NAME}"
                }
            }
        }
    }
}


